<!DOCTYPE html>
<html>
<head>
  <title>Folkabulary</title>
  <script src="http://fb.me/react-0.11.1.min.js"></script>
  <script src="http://fb.me/JSXTransformer-0.11.1.js"></script>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.min.js"></script>

  <link rel="stylesheet" type="text/css" href="/bootstrap.min.css">
  <link rel="stylesheet" href="//rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/style.css">

</head>
<body>
  <div id="header" class="text-center"></div>
  <div id="intro" class="text-center"></div>
  <div id="graph-area" class="text-center">
    <svg style="width: 1050px; height: 760px;"></svg>
  </div>
  <div id="analysis"></div>
  
  <script type="text/jsx">
    /** @jsx React.DOM */
    var Header = React.createClass({
      render: function () {
        return (
          <div>
            <img src="/folkabulary.png"></img>
          </div>
        )
      }
    });

    var Intro = React.createClass({
      render: function () {
        return (
          <p><i className="fa fa-music"></i>&nbsp;A hack for <a href="https://twitter.com/musichackdayde">#MHD Berlin</a> by <a href="https://twitter.com/andres_ml">@andres_ml</a> and <a href="https://twitter.com/_mattsch">@_mattsch</a>, inspired by the brilliant <a href="http://mdaniels.com/">Matt Daniels</a>.
            <br></br>
            <br></br>
            A visualisation of the vocabulary of Folk musicians. Crawled from the semantic web, the MusicGraph API and drawn with D3 and React.
          </p>
        )
      }
    })

    React.renderComponent(
      <Header />,
      document.getElementById('header')
    );

    React.renderComponent(
      <Intro />,
      document.getElementById('intro')
    );
  </script>

  <script type="text/javascript">
    (function() {
    //D3 program to fit circles of different sizes along a 
    //horizontal dimension, shifting them up and down
    //vertically only as much as is necessary to make
    //them all fit without overlap.
    //By Amelia Bellamy-Royds, in response to 
    //http://stackoverflow.com/questions/20912081/d3-js-circle-packing-along-a-line
    //inspired by
    //http://www.nytimes.com/interactive/2013/05/25/sunday-review/corporate-taxes.html
    //Freely released for any purpose under Creative Commons Attribution licence: http://creativecommons.org/licenses/by/3.0/
    //Author name and link to this page is sufficient attribution.

    
    var inputData = [{"mbid": "Store", "artist_name": ".DS", "num_words": 5}, {"mbid": "09920eef-ba69-4c46-96ae-a93f885af533", "track_count": "7", "artist_name": "Alan Lomax", "num_words": 103}, {"mbid": "8628d382-f949-469d-a610-2c5b2385daa6", "track_count": "3", "artist_name": "Alastair Moock", "num_words": 15}, {"mbid": "d85122eb-7738-4608-86ec-7d4b09605e7d", "track_count": "92", "artist_name": "Alice Peacock", "num_words": 551}, {"mbid": "9f41d3cd-5fe4-4144-b658-b00c557f0441", "track_count": "3", "artist_name": "Anais Mitchell", "num_words": 15}, {"mbid": "a7bdc71f-697a-45d9-92b2-a01fbbe50272", "track_count": "316", "artist_name": "Ani DiFranco", "num_words": 2132}, {"mbid": "70bec691-4503-4219-9013-15802ed4bb65", "track_count": "5", "artist_name": "Anne Hills", "num_words": 58}, {"mbid": "580a6248-d7b7-4d9d-bd84-2423e6d8dff4", "track_count": "8", "artist_name": "Antje Duvekot", "num_words": 105}, {"mbid": "b8efe8ac-45db-4a71-bb51-c1503986172f", "track_count": "227", "artist_name": "Arlo Guthrie", "num_words": 1324}, {"mbid": "5027c984-738d-4efe-a9ba-af52b93a131f", "track_count": "4", "artist_name": "Barbara Dane", "num_words": 45}, {"mbid": "626e6742-8e36-4f1e-aca7-88b64ea4dde6", "track_count": "1", "artist_name": "Barbara Kessler", "num_words": 15}, {"mbid": "309c62ba-7a22-4277-9f67-4a162526d18a", "track_count": "325", "artist_name": "Beck", "num_words": 1907, "image_url": "http://nme.assets.ipccdn.co.uk/images/gallery/2014Beck_Press_200114.jpg"}, {"mbid": "0bdb3a4d-962d-458c-904e-4fddcf1283ee", "track_count": "3", "artist_name": "Bess Lomax Hawes", "num_words": 30}, {"mbid": "186bf3f4-9320-4738-a95c-fd0c62948c56", "track_count": "85", "artist_name": "Bill Miller", "num_words": 523}, {"mbid": "c274bda6-1230-49c6-b307-22146344d335", "track_count": "34", "artist_name": "Bill Morrissey", "num_words": 184}, {"mbid": "d5da888c-dd09-46e1-8e60-8cde1f028bcd", "track_count": "23", "artist_name": "Bill Staines", "num_words": 148}, {"mbid": "f864bc76-4bf0-475b-a577-a7a72e639828", "track_count": "14", "artist_name": "Billy Pilgrim", "num_words": 146}, {"mbid": "72c536dc-7137-4477-a521-567eeb840fa8", "track_count": "336", "artist_name": "Bob Dylan", "num_words": 2063, "image_url": "http://www.brainpickings.org/wp-content/uploads/2014/05/bobdylan1.jpg"}, {"mbid": "d31d0631-1e45-4d22-a6a7-a0c87047f5c5", "track_count": "5", "artist_name": "Bob Gibson", "num_words": 59}, {"mbid": "437a0e49-c6ae-42f6-a6c1-84f25ed366bc", "track_count": "90", "artist_name": "Bon Iver", "num_words": 394}, {"mbid": "9d48cb68-cd4d-49fe-b7a8-d31deb678fe8", "track_count": "26", "artist_name": "Brownie McGhee", "num_words": 224}, {"mbid": "2007a405-5d32-4752-b94c-f2c3bec8dce5", "track_count": "10", "artist_name": "Bryan Bowers", "num_words": 45}, {"mbid": "086c1936-9eaa-4091-b140-ad33a51a3b71", "track_count": "137", "artist_name": "Burl Ives", "num_words": 583}, {"mbid": "7e534f92-84dd-457f-b737-f28db04a5ba5", "track_count": "4", "artist_name": "Carolyn Hester", "num_words": 30}, {"mbid": "efc2524f-20a3-4942-8fe2-869fa09e3ea1", "track_count": "188", "artist_name": "Carrie Newcomer", "num_words": 1025}, {"mbid": "22f74ff1-ecec-4ef2-b1f7-44fbb8139f9d", "track_count": "38", "artist_name": "Cass Elliot", "num_words": 91}, {"mbid": "e2c1f24b-03e3-4935-ab6a-82aee56c0c1a", "track_count": "6", "artist_name": "Cathy Fink", "num_words": 42}, {"mbid": "4f19d476-983b-45ee-9213-b56bd0cf44e4", "track_count": "93", "artist_name": "Catie Curtis", "num_words": 687}, {"mbid": "74304517-fb31-45b9-b3e9-16728fa66f7b", "track_count": "28", "artist_name": "Chad Mitchell Trio", "num_words": 150}, {"mbid": "a0c94d6d-fa78-4038-9f18-4a8e2a40bd15", "track_count": "75", "artist_name": "Cheryl Wheeler", "num_words": 516}, {"mbid": "1f260a5b-b84d-4935-9ca0-855d2fcd3814", "track_count": "2", "artist_name": "Chris Pureka", "num_words": 15}, {"mbid": "0667bf87-1c76-46e7-bb06-9e8bf8fb5ff8", "track_count": "54", "artist_name": "Chris Smither", "num_words": 273}, {"mbid": "17c91d2f-df86-4355-b7c0-55d4046e0cb2", "track_count": "1", "artist_name": "Christine Kane", "num_words": 15}, {"mbid": "03172678-72c4-423a-b3ca-4bbc7fc89d04", "track_count": "42", "artist_name": "Christine Lavin", "num_words": 275}, {"mbid": "7190a2cd-b24f-46ba-8140-d35b71ca457e", "track_count": "188", "artist_name": "Cisco Houston", "num_words": 859}, {"mbid": "56818e5b-09fc-4134-ba69-5ac04ee24269", "track_count": "3", "artist_name": "Claudia Schmidt", "num_words": 30}, {"mbid": "0eee89dc-7d86-4a15-97be-011652c49288", "track_count": "26", "artist_name": "Conor Oberst", "num_words": 236}, {"mbid": "eff6bb53-849d-44d3-b5cd-8d6e07891796", "track_count": "132", "artist_name": "Country Joe McDonald", "num_words": 662}, {"mbid": "7ea930ae-2be4-4d8f-ad39-c7a6218f0b7c", "track_count": "4", "artist_name": "Cris Williamson", "num_words": 43}, {"mbid": "f8b5b1f6-e476-4944-95bf-23b32ddf11b6", "track_count": "61", "artist_name": "Dan Bern", "num_words": 673}, {"mbid": "f9908eb1-30ac-4fc9-929c-81fe2dcf2266", "track_count": "251", "artist_name": "Dar Williams", "num_words": 1201}, {"mbid": "6438d141-1bd5-4d1b-891e-dedfae4d9534", "track_count": "22", "artist_name": "Dave Carter", "num_words": 174}, {"mbid": "c07a8ae5-3322-482f-9bfe-27448a2cf593", "track_count": "83", "artist_name": "Dave Van Ronk", "num_words": 537}, {"mbid": "ca5be857-7add-49fd-8612-cec1c2afeae8", "track_count": "3", "artist_name": "David Blue", "num_words": 29}, {"mbid": "00daff08-6cd1-4f91-b1ec-2f8ce8603442", "track_count": "18", "artist_name": "David Bromberg", "num_words": 99}, {"mbid": "0a87c11e-7b6e-416f-9ff6-bd60a172f417", "track_count": "6", "artist_name": "David Holt", "num_words": 89}, {"mbid": "80094b94-5062-45ea-9917-4543e522093c", "track_count": "354", "artist_name": "David Wilcox", "num_words": 1854}, {"mbid": "498c84a9-b9da-40fd-8391-0d3e79ad26a9", "track_count": "15", "artist_name": "Debbie Friedman", "num_words": 69}, {"mbid": "4cfe744b-fcfc-4d05-8627-d0f4f3969163", "track_count": "118", "artist_name": "Denison Witmer", "num_words": 609}, {"mbid": "085ccc0d-c695-4961-b30e-3394354a0d33", "track_count": "6", "artist_name": "Derroll Adams", "num_words": 72}, {"mbid": "0110e63e-0a9b-4818-af8e-41e180c20b9a", "track_count": "146", "artist_name": "Devendra Banhart", "num_words": 1060}, {"mbid": "be8d6886-0a2d-4312-a174-de192ee77eb2", "track_count": "49", "artist_name": "disappear fear", "num_words": 291}, {"mbid": "cf66ee44-360b-445e-bfb8-e20e69325742", "track_count": "143", "artist_name": "Donavon Frankenreiter", "num_words": 399}, {"mbid": "fe0321d3-3243-435d-a62c-1b861a9ca85e", "track_count": "64", "artist_name": "Eddie from Ohio", "num_words": 634}, {"mbid": "aedf7026-33a4-4cac-900c-994eceb7e53e", "track_count": "1", "artist_name": "Ed McCurdy", "num_words": 15}, {"mbid": "907f53c2-f7d1-406a-8071-30262ba472ca", "track_count": "25", "artist_name": "Elizabeth Cotten", "num_words": 15}, {"mbid": "c5a7534b-20a7-46cd-a0e2-dd16d41824da", "track_count": "20", "artist_name": "Eliza Gilkyson", "num_words": 217}, {"mbid": "27431fe7-ed97-4e78-abe7-16ccc2348dd5", "track_count": "1", "artist_name": "Ella Jenkins", "num_words": 15}, {"mbid": "03ad1736-b7c9-412a-b442-82536d63a5c4", "track_count": "297", "artist_name": "Elliott Smith", "num_words": 1225}, {"mbid": "b8f15e09-d79b-4b35-a183-7c6821f4bd5b", "track_count": "144", "artist_name": "Ellis Paul", "num_words": 736}, {"mbid": "c1857ec7-94b1-43dc-8cc2-0c9d265cd8c1", "track_count": "24", "artist_name": "Elvis Perkins", "num_words": 176}, {"mbid": "69268541-0d69-4e0b-a121-2697bc8fff1b", "track_count": "66", "artist_name": "Eric Andersen", "num_words": 207}, {"mbid": "5b7ce89a-8bdc-4bb8-be1a-ca2073971157", "track_count": "16", "artist_name": "Eric Schwartz", "num_words": 187}, {"mbid": "59a2b7e9-132e-46be-b6ae-6c1d64838f76", "track_count": "4", "artist_name": "Frank Hamilton", "num_words": 44}, {"mbid": "f51a55d0-5f9a-4df9-8a05-ab7bf56fa49d", "track_count": "35", "artist_name": "Fred Neil", "num_words": 100}, {"mbid": "1bea34db-1338-453d-8444-639196437c4f", "track_count": "60", "artist_name": "Fred Small", "num_words": 403}, {"mbid": "466b0935-98c2-44db-bf2b-f8033735b485", "track_count": "143", "artist_name": "Freedy Johnston", "num_words": 822}, {"mbid": "3f49ffea-060c-419e-bc57-690cf23c2ac7", "track_count": "5", "artist_name": "Geoff Muldaur", "num_words": 58}, {"mbid": "2ff49515-1701-4bac-a53a-04345893f3f3", "track_count": "140", "artist_name": "Gillian Welch", "num_words": 796, "image_url": "http://www.virginmedia.com/images/hangover-gillian-welch-590x350.jpg"}, {"mbid": "bc0a4620-fc6a-45fb-b006-fc8f714a6f21", "track_count": "29", "artist_name": "Girlyman", "num_words": 274}, {"mbid": "7d4174d6-39c2-43fb-a5d7-693188869203", "track_count": "1", "artist_name": "Gordon Bok", "num_words": 15}, {"mbid": "8d5521d6-473d-4da0-b68d-553d4188619d", "track_count": "26", "artist_name": "Greg Brown", "num_words": 198}, {"mbid": "ca311a64-0a30-4fdb-ad0c-02444b8b0b8b", "track_count": "33", "artist_name": "Gretchen Peters", "num_words": 343}, {"mbid": "866d2548-ec0f-4f77-8230-1975b9f737f9", "track_count": "21", "artist_name": "Grey DeLisle", "num_words": 162}, {"mbid": "49e81a97-39ca-42fd-b3fd-b566c8f2a0bd", "track_count": "6", "artist_name": "Guy Carawan", "num_words": 45}, {"mbid": "05a125e7-7cfa-4e86-8c4a-fa00e348ee23", "track_count": "2", "artist_name": "Hally Wood", "num_words": 15}, {"mbid": "ae4e3542-7838-4a6f-b753-08216be5a6bb", "track_count": "337", "artist_name": "Harry Chapin", "num_words": 1054}, {"mbid": "4b53c7f2-83e8-438b-b787-73c033de5c91", "track_count": "17", "artist_name": "Holly Near", "num_words": 219}, {"mbid": "94b3706d-3247-455c-a3ff-725f39faa245", "track_count": "1", "artist_name": "Hugh Blumenfeld", "num_words": 15}, {"mbid": "00c49f40-d715-4b79-b223-432048602cce", "track_count": "299", "artist_name": "Indigo Girls", "num_words": 1590}, {"mbid": "1fc494a1-9109-4081-a455-2d05bea9d2bf", "track_count": "115", "artist_name": "Ingrid Michaelson", "num_words": 635}, {"mbid": "e06aa44d-4c98-40c6-bf1d-d54637fa0bde", "track_count": "109", "artist_name": "Iris DeMent", "num_words": 750}, {"mbid": "983ec514-fc89-4f87-8e97-501906227162", "track_count": "5", "artist_name": "Jack Hardy", "num_words": 60}, {"mbid": "52adfa3f-a578-4b86-8aaa-3b35d25bf91d", "track_count": "2", "artist_name": "Jack Rose", "num_words": 15}, {"mbid": "00ddeeba-11a8-46a9-bcac-0e5fbc4f4008", "track_count": "8", "artist_name": "James Lee Stanley", "num_words": 90}, {"mbid": "107d0c22-d051-4d98-8206-4e14de02132a", "track_count": "110", "artist_name": "James Taylor", "num_words": 901}, {"mbid": "d4590225-b121-4e80-a79f-8a607b76b278", "track_count": "5", "artist_name": "Jamie Anderson", "num_words": 45}, {"mbid": "b72f115c-8afa-4dc5-bc6c-11225a53708a", "track_count": "153", "artist_name": "Janis Ian", "num_words": 583}, {"mbid": "8729629a-fdd6-4d10-823b-960115f06d5a", "track_count": "10", "artist_name": "Jay Ungar", "num_words": 30}, {"mbid": "ea81bd75-b65f-4d93-aaf4-33f3c0c3ea14", "track_count": "7", "artist_name": "Jean Ritchie", "num_words": 75}, {"mbid": "fb5efe24-591d-40a7-9587-36f44b21c2bd", "track_count": "2", "artist_name": "Jeffrey Foucault", "num_words": 15}, {"mbid": "18e820c3-ff82-4919-ad3d-edad6f93b652", "track_count": "14", "artist_name": "Jeffrey Lewis", "num_words": 133}, {"mbid": "b9b7bb3d-c541-414b-a7b6-7d1853314bbf", "track_count": "35", "artist_name": "Jennifer Kimball", "num_words": 321}, {"mbid": "f630bd98-4e2b-49a4-96d5-c4c4b99b58bf", "track_count": "102", "artist_name": "Jesse Harris", "num_words": 615}, {"mbid": "f9da337d-e622-42a1-85dc-8a3d79e5daf9", "track_count": "55", "artist_name": "Jimmy LaFave", "num_words": 571}, {"mbid": "fcfa9543-e113-4ef9-9ef6-455ba4cbe7af", "track_count": "320", "artist_name": "Jim Croce", "num_words": 739}, {"mbid": "cb69e1f1-bc76-4df5-93c9-cf97dd8a3b5c", "track_count": "19", "artist_name": "Joanna Newsom", "num_words": 118}, {"mbid": "92d37892-6186-4459-9cc1-f0dde57652d0", "track_count": "279", "artist_name": "Joan Baez", "num_words": 1699}, {"mbid": "52d91431-00fd-47f6-99d5-9eb5293a1893", "track_count": "4", "artist_name": "Jody Stecher", "num_words": 59}, {"mbid": "98a10aed-987d-4323-b801-5c783f910be4", "track_count": "2", "artist_name": "Joe Glazer", "num_words": 29}, {"mbid": "34e10b51-b5c6-4bc1-b70e-f05f141eda1e", "track_count": "360", "artist_name": "John Denver", "num_words": 1570}, {"mbid": "95bb27d2-43c7-4a92-85ee-f95a245f0ee4", "track_count": "7", "artist_name": "John Fahey", "num_words": 60}, {"mbid": "a2e9081f-cceb-443d-88f1-898e2c421cb9", "track_count": "162", "artist_name": "John Gorka", "num_words": 1301}, {"mbid": "91914598-2c5a-42c8-8017-301fbbb44853", "track_count": "1", "artist_name": "John Herald", "num_words": 15}, {"mbid": "1cd4d43c-68bb-4e91-9de8-596470e413ed", "track_count": "12", "artist_name": "John McCutcheon", "num_words": 130}, {"mbid": "e86492c1-0376-4df0-8042-8ba058c83960", "track_count": "309", "artist_name": "John Prine", "num_words": 1697}, {"mbid": "b23f4734-27e3-48e8-8d6e-492eeb21d3e6", "track_count": "125", "artist_name": "Jonatha Brooke", "num_words": 645}, {"mbid": "ac53c83c-c969-477f-9564-769e1ed80519", "track_count": "332", "artist_name": "Josh Ritter", "num_words": 1138}, {"mbid": "023d64c9-93db-4a20-8c5c-2efa1a53481a", "track_count": "199", "artist_name": "Josh Rouse", "num_words": 1037}, {"mbid": "f0b3af36-a38b-4e5e-bf9a-d25ae11ca741", "track_count": "36", "artist_name": "Josh White", "num_words": 145}, {"mbid": "ecb42480-bd27-484a-acab-4ef56de126d4", "track_count": "118", "artist_name": "Judee Sill", "num_words": 226}, {"mbid": "06f9c474-0547-40fc-be3d-1ae6ce38abd7", "track_count": "225", "artist_name": "Judy Collins", "num_words": 1221}, {"mbid": "7333182d-8933-4896-adaa-fe98e6b59bd7", "track_count": "223", "artist_name": "Kasey Chambers", "num_words": 912}, {"mbid": "d28a93fc-30a4-49e9-a8a5-68728d37900f", "track_count": "46", "artist_name": "Kate Wolf", "num_words": 159}, {"mbid": "67f50b10-79fb-487d-a6a0-1e8cc51e622b", "track_count": "44", "artist_name": "Kris Delmhorst", "num_words": 440}, {"mbid": "2e78fa26-20ba-4a28-baf2-3e053cb2c564", "track_count": "5", "artist_name": "Kristen Hall", "num_words": 45}, {"mbid": "0bc5259b-bf08-40ad-9f6a-20462f652e83", "track_count": "6", "artist_name": "Langhorne Slim", "num_words": 45}, {"mbid": "53299fed-ec27-464f-94eb-5fda2db2902a", "track_count": "23", "artist_name": "Laura Love", "num_words": 117}, {"mbid": "c71dd65d-7e23-42ff-a129-4bb7de341e4a", "track_count": "1", "artist_name": "Lavender Diamond", "num_words": 15}, {"mbid": "ddcfbdcf-cf8d-4776-8a69-10f39376b5a2", "track_count": "84", "artist_name": "Lead Belly", "num_words": 275}, {"mbid": "59f0f8a5-094d-414a-9d9d-b20e3036a60b", "track_count": "1", "artist_name": "Lee Hays", "num_words": 15}, {"mbid": "859757e9-a810-4631-97c4-f4a12a66b94c", "track_count": "3", "artist_name": "Leon Bibb", "num_words": 15}, {"mbid": "1a21878d-05b1-4983-a059-7cf3abee04b7", "track_count": "77", "artist_name": "Leo Kottke", "num_words": 446}, {"mbid": "3d19ffbe-ce69-4adb-9f50-d0c555b063ca", "track_count": "107", "artist_name": "Livingston Taylor", "num_words": 408}, {"mbid": "886557b3-2fa6-494e-993d-b955e789dc57", "track_count": "52", "artist_name": "Lori McKenna", "num_words": 433}, {"mbid": "21685b15-3074-446e-aa1d-ff7157014f53", "track_count": "371", "artist_name": "Lucinda Williams", "num_words": 1406}, {"mbid": "9781630c-797b-4164-a539-e1e9ac16eae8", "track_count": "81", "artist_name": "Lucy Kaplansky", "num_words": 640}, {"mbid": "27c978f2-284d-469f-a116-23f7fca9a6fc", "track_count": "6", "artist_name": "Luke Temple", "num_words": 45}, {"mbid": "c4b23420-7bf4-4212-880d-3ce52631c5d9", "track_count": "4", "artist_name": "Lullaby for the Working Class", "num_words": 30}, {"mbid": "655b3e5b-09e4-45dd-941c-6fa3fc12521b", "track_count": "143", "artist_name": "M. Ward", "num_words": 874}, {"mbid": "88bfd88a-a94e-4ce8-b57d-0bda5363b35a", "track_count": "5", "artist_name": "Marcy Marxer", "num_words": 56}, {"mbid": "3aeb9e89-4fc3-46f4-a5a8-cf6c1b7e66a0", "track_count": "99", "artist_name": "Maria Muldaur", "num_words": 397}, {"mbid": "83a26bec-49fc-4c61-983c-0beef780b78d", "track_count": "61", "artist_name": "Mark Erelli", "num_words": 599}, {"mbid": "0685ac4a-5cfc-408a-b391-903ea20e00bf", "track_count": "85", "artist_name": "Martin Sexton", "num_words": 464}, {"mbid": "3993de71-aa4d-4b7b-8488-68b0186011d4", "track_count": "20", "artist_name": "Martin Zellar", "num_words": 127}, {"mbid": "ba1bf556-2af2-4772-835f-ed2e15070758", "track_count": "336", "artist_name": "Mary Chapin Carpenter", "num_words": 1603}, {"mbid": "1efadc05-01b5-4a39-9c6f-da5c975276dd", "track_count": "83", "artist_name": "Mary Gauthier", "num_words": 527}, {"mbid": "fa7ed4fb-fa39-4820-8ae1-5fe98bc2ef8d", "track_count": "108", "artist_name": "Matt Costa", "num_words": 459}, {"mbid": "c8c3beb5-d213-40e6-9ef6-d4e1cad59e12", "track_count": "219", "artist_name": "Melanie", "num_words": 560}, {"mbid": "071e411f-537e-423b-b11e-fe1b8a4590f8", "track_count": "33", "artist_name": "Melissa Ferrick", "num_words": 273}, {"mbid": "a45bbcf5-f009-49cb-962e-4591083573d1", "track_count": "14", "artist_name": "Michael Hurley", "num_words": 75}, {"mbid": "abba9546-7b24-4f1c-9eda-1f8f1990993a", "track_count": "4", "artist_name": "Michael Peter Smith", "num_words": 30}, {"mbid": "e2f41b6e-7045-44e8-86bf-deee758532e2", "track_count": "177", "artist_name": "Michelle Shocked", "num_words": 682}, {"mbid": "22baef3d-f490-43da-bea8-3a9a4d149143", "track_count": "11", "artist_name": "Mike Seeger", "num_words": 86}, {"mbid": "4f4e8f4f-59e5-4fc6-8dcf-f0e844afc75a", "track_count": "12", "artist_name": "Mimi Farin\u0303a", "num_words": 68}, {"mbid": "c3ac0d79-8adc-42db-aa70-9ab15e980f3d", "track_count": "90", "artist_name": "Mindy Smith", "num_words": 469}, {"mbid": "47fd1288-210c-4230-a878-98df4f069975", "track_count": "3", "artist_name": "Modern Folk Quartet", "num_words": 30}, {"mbid": "8729629a-fdd6-4d10-823b-960115f06d5a", "artist_name": "Molly Mason", "num_words": 30}, {"mbid": "bf103bd9-7a20-4a7e-95e0-369fe494fc88", "track_count": "63", "artist_name": "Moxy Fru\u0308vous", "num_words": 569}, {"mbid": "b9ffd0e7-7f95-46db-bc1c-8094d459f084", "track_count": "414", "artist_name": "Nanci Griffith", "num_words": 1833}, {"mbid": "365144f7-85af-4c83-b24b-b1d0b26160bb", "track_count": "88", "artist_name": "Nickel Creek", "num_words": 528}, {"mbid": "e81906c6-cba2-44ec-9e39-29737754d809", "track_count": "87", "artist_name": "Odetta", "num_words": 315}, {"mbid": "cd85a41e-3d85-4d14-ab4b-f35894664730", "track_count": "40", "artist_name": "Patrick Park", "num_words": 186}, {"mbid": "3bcbe4a6-5e57-4aa5-bca4-d00b4815d99b", "track_count": "6", "artist_name": "Patrick Sky", "num_words": 43}, {"mbid": "6fddcfc3-20b6-48d0-87ba-8211eca3420c", "track_count": "272", "artist_name": "Patty Griffin", "num_words": 1046}, {"mbid": "2450c460-5a4f-44b0-a6d9-847f281599a1", "track_count": "87", "artist_name": "Patty Larkin", "num_words": 523}, {"mbid": "ac852d1b-b926-4329-b097-a49d9454189a", "track_count": "6", "artist_name": "Paul Siebel", "num_words": 15}, {"mbid": "66894f76-76bd-4318-a30c-3b565b9e95b8", "track_count": "13", "artist_name": "Peggy Seeger", "num_words": 144}, {"mbid": "af18a9bc-e4ab-4068-9489-b64e8186fcf1", "track_count": "126", "artist_name": "Pete Seeger", "num_words": 860}, {"mbid": "41ff35a6-5fc4-4e48-9d96-2f34357ab334", "track_count": "314", "artist_name": "Peter, Paul and Mary", "num_words": 1587}, {"mbid": "a9e5337b-0608-4401-91d4-18ab4cf47ff8", "track_count": "44", "artist_name": "Peter Mulvey", "num_words": 328}, {"mbid": "80cd255d-995c-47f1-a5bc-cc34669a37a0", "track_count": "384", "artist_name": "Phil Ochs", "num_words": 1090}, {"mbid": "0f471fb6-2546-4900-a1a8-14904f4f22e2", "track_count": "4", "artist_name": "Phranc", "num_words": 45}, {"mbid": "0ce8bbc8-a898-4054-a125-81c805dd7931", "track_count": "15", "artist_name": "Priscilla Herdman", "num_words": 175}, {"mbid": "83cedec7-f8e6-4926-a051-351ea401535c", "track_count": "2", "artist_name": "Richard Farin\u0303a", "num_words": 15}, {"mbid": "e690e807-2d40-4c96-8dc5-f9baaf1cccfc", "track_count": "95", "artist_name": "Richard Shindell", "num_words": 578}, {"mbid": "b45ea9f4-d0a1-45e1-b3a8-bf4fe509b8d0", "track_count": "168", "artist_name": "Richie Havens", "num_words": 635}, {"mbid": "202d58ff-8856-4262-a98d-ac8674c1d09e", "track_count": "4", "artist_name": "Robin Batteau", "num_words": 45}, {"mbid": "102045e3-577c-4b10-b01b-424b7e461094", "track_count": "380", "artist_name": "Roger Miller", "num_words": 1014}, {"mbid": "9afdb5f2-9a20-4f34-94c2-d0da4c20b0bc", "track_count": "11", "artist_name": "Ronnie Gilbert", "num_words": 147}, {"mbid": "d4019e11-c719-4338-9198-4c03da0cfb6f", "track_count": "85", "artist_name": "Rosie Thomas", "num_words": 485}, {"mbid": "4b6f301a-9366-4103-af56-9bbd2ae1b991", "track_count": "4", "artist_name": "Sarah Lee Guthrie", "num_words": 30}, {"mbid": "5c9bd7ed-ede8-49e2-a693-2b6b59d06f65", "track_count": "29", "artist_name": "Sara Hickman", "num_words": 313}, {"mbid": "42222090-c5e5-4243-8582-c29bc8b63ec6", "track_count": "323", "artist_name": "Shawn Colvin", "num_words": 1360}, {"mbid": "91b5b560-6e45-4bdb-911d-fd7fc001a3c2", "track_count": "4", "artist_name": "Si Kahn", "num_words": 56}, {"mbid": "3f1aee2a-294c-4997-aed9-1c4ba1d984f7", "track_count": "20", "artist_name": "Slaid Cleaves", "num_words": 75}, {"mbid": "47435d42-7f8d-4288-bdb2-985e3c7f194f", "track_count": "204", "artist_name": "Steve Forbert", "num_words": 829}, {"mbid": "6dcf3c49-6293-4bd3-bcff-ddaefc967089", "track_count": "78", "artist_name": "Steve Goodman", "num_words": 284}, {"mbid": "01d3c51b-9b98-418a-8d8e-37f6fab59d8c", "track_count": "211", "artist_name": "Sufjan Stevens", "num_words": 1376}, {"mbid": "2be59423-9cf7-4a92-b967-97c1222dfe22", "track_count": "27", "artist_name": "Susan Werner", "num_words": 117}, {"mbid": "cf119120-7df5-47d7-9dec-49f8837a4e40", "track_count": "373", "artist_name": "Suzanne Vega", "num_words": 1057}, {"mbid": "28b6ce62-5e14-443c-80b4-ebb8e04936e1", "track_count": "16", "artist_name": "Sweet Honey in the Rock", "num_words": 131}, {"mbid": "0a8df504-df94-4d77-a3c5-2b9e5c9727e2", "track_count": "18", "artist_name": "Terry Gilkyson", "num_words": 32}, {"mbid": "5451792e-a144-452a-b82e-a8a33cc4b57d", "track_count": "24", "artist_name": "Theodore Bikel", "num_words": 92}, {"mbid": "59b0f5da-cd35-4ec7-a4a8-74d7aa7948b7", "track_count": "114", "artist_name": "The Brothers Four", "num_words": 196}, {"mbid": "80debf0b-87cc-421b-bfc2-295b7f75e8cb", "track_count": "13", "artist_name": "The Chenille Sisters", "num_words": 191}, {"mbid": "91dad7e7-0bf6-47e8-bd42-ef1fac32c729", "track_count": "86", "artist_name": "The Civil Wars", "num_words": 329}, {"mbid": "5bf05dd4-3ac1-4b8b-b9a1-163790d10192", "track_count": "102", "artist_name": "The Highwaymen", "num_words": 492}, {"mbid": "ca68b1e2-7063-4c10-b094-ba5068236017", "track_count": "3", "artist_name": "The Kennedys", "num_words": 30}, {"mbid": "78977492-5888-4c7a-92b3-95293e90a653", "track_count": "360", "artist_name": "The Kingston Trio", "num_words": 1809}, {"mbid": "af6c7228-bcc2-42a5-9129-42071bacd43e", "track_count": "2", "artist_name": "The Klezmatics", "num_words": 15}, {"mbid": "59cf7e39-bda6-4d9e-8018-07cda8cb6f1c", "track_count": "29", "artist_name": "The Limeliters", "num_words": 162}, {"mbid": "5a2c6fa5-4a45-4761-8672-797a601e5a20", "track_count": "2", "artist_name": "The Mammals", "num_words": 30}, {"mbid": "b411483b-e9cc-4b4f-9661-0452333c615a", "track_count": "46", "artist_name": "The New Christy Minstrels", "num_words": 173}, {"mbid": "a1df27fa-732d-4115-ac55-03b29463d139", "track_count": "52", "artist_name": "The Nields", "num_words": 287}, {"mbid": "4ee9f5ed-5f20-41a7-b467-72c79549a67d", "track_count": "212", "artist_name": "The Roches", "num_words": 1268}, {"mbid": "52e3ff4e-bb14-481a-8a6b-145377db0ba8", "track_count": "47", "artist_name": "The Sandpipers", "num_words": 216}, {"mbid": "9e5eaf40-8ee6-410a-89b3-9fff7a8b2f38", "track_count": "42", "artist_name": "The Shells", "num_words": 71}, {"mbid": "09a6a08f-53b0-47b5-92ce-8975fa0b7df1", "track_count": "6", "artist_name": "The Tarriers", "num_words": 15}, {"mbid": "621b8812-df32-4bf1-80c4-aee05f803137", "track_count": "103", "artist_name": "The Weavers", "num_words": 319}, {"mbid": "59d34d63-e209-4f26-8a09-b08d12202082", "track_count": "77", "artist_name": "The Weepies", "num_words": 430}, {"mbid": "8546949d-f46c-45ab-8391-85b26dda6b65", "track_count": "302", "artist_name": "Tim Buckley", "num_words": 930}, {"mbid": "1880815f-5f43-4eba-9038-96ba0380134d", "track_count": "75", "artist_name": "Tom Paxton", "num_words": 289}, {"mbid": "7a64f2ab-0605-466b-92ce-ddeb7bef5d42", "track_count": "75", "artist_name": "Tom Rush", "num_words": 356}, {"mbid": "c3aeb863-7b26-4388-94e8-5a240f2be21b", "track_count": "269", "artist_name": "Tom Waits", "num_words": 1947}, {"mbid": "d67d1a21-6e45-4dd6-aef0-0191ba3796e0", "track_count": "286", "artist_name": "Townes Van Zandt", "num_words": 1083}, {"mbid": "1129817c-488a-4096-80c1-77fc1b107c93", "track_count": "208", "artist_name": "Tracy Chapman", "num_words": 1065}, {"mbid": "23e968d6-c560-44b2-98f1-4a18896c769b", "track_count": "25", "artist_name": "Tracy Grammer", "num_words": 201}, {"mbid": "16b7b482-06c2-42ee-8f2b-ef3746b92b8b", "track_count": "6", "artist_name": "Trapezoid", "num_words": 45}, {"mbid": "bb86e997-e114-46f9-837f-d7720ff97064", "track_count": "3", "artist_name": "Uncle Bonsai", "num_words": 30}, {"mbid": "c80cc23a-690e-498f-9e61-bea2509ca096", "track_count": "14", "artist_name": "Utah Phillips", "num_words": 118}, {"mbid": "6f320c25-5650-47dc-8d3c-7b8972f68ce2", "track_count": "3", "artist_name": "Vance Gilbert", "num_words": 44}, {"mbid": "b07cdbbe-421e-418a-bbb7-ce0d8d53bfa8", "track_count": "148", "artist_name": "Vic Chesnutt", "num_words": 1404}, {"mbid": "161fe176-42d6-4a1a-8372-280164c7f15f", "track_count": "41", "artist_name": "Victoria Williams", "num_words": 314}, {"mbid": "cbb6c457-bafa-432c-87ce-f931ed32113a", "track_count": "3", "artist_name": "Wally Pleasant", "num_words": 44}, {"mbid": "fdb40275-50df-4894-8481-573e86956e81", "track_count": "182", "artist_name": "Whiskeytown", "num_words": 726}, {"mbid": "9f42398b-56e5-4430-842c-1d843ac9f116", "track_count": "4", "artist_name": "William Elliott Whitmore", "num_words": 59}, {"mbid": "40fb02de-afc3-441c-a6ec-21fee861d478", "track_count": "4", "artist_name": "Willie Nile", "num_words": 30}, {"mbid": "d5c9ee75-5711-469f-b671-669dcde5c9bf", "track_count": "96", "artist_name": "Willy Mason", "num_words": 516}, {"mbid": "cbd827e1-4e38-427e-a436-642683433732", "track_count": "228", "artist_name": "Woody Guthrie", "num_words": 872}];

    // First we need to normalise our values
    var max=0, min=null, maxtracks=0, mintracks=null;
    inputData.forEach(function (datum) {
      if (datum.num_words > max) {
        max = datum.num_words;
      }

      if (!min) {
        min = datum.num_words;
      }

      if (datum.num_words < min) {
        min = datum.num_words;
      }

      var numtracks = parseInt(datum.track_count);

      if (numtracks > maxtracks) {
        maxtracks = numtracks;
      }

      if (!mintracks) {
        mintracks = numtracks;
      }

      if (numtracks < mintracks) {
        mintracks = numtracks;
      }
      console.log('MAX TRACKS? %s', maxtracks);
      // $.get('http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&mbid='+datum.mbid+'&api_key=57b53c3da9ce44e9f95eddc2c449b816&format=json', function (data) {
      //     console.log(data.artist.image[2]['#text']);
      //     datum.artist_image = data.artist.image[2]['#text'];
      // })
    })



    //create data array//
    var data = [];
    var N = 25, i = N;
    var randNorm = d3.random.normal(0.5,0.2)
    inputData.forEach(function (datum) {
      console.log('Adding %s (%s)', datum.artist_name, datum.num_words);
      if (datum.num_words > 100 && datum.track_count > 0) { 
        data.push({
          x:(datum.num_words / max),
          r:(datum.track_count / maxtracks),
          name: datum.artist_name,
          mbid: datum.mbid,
          raw_num_words: datum.num_words,
          track_count: datum.track_count,
          all_max: max,
          all_min: min,
          image_url: datum.image_url || null
        });
      }
    })

    var tip = d3.tip()
      .attr('class', 'd3-tip')
      .html(function (d) {
        return "<p>"+d.name+"</p>" + 
                "</br>" +
                "<p>"+d.raw_num_words+" words used</p>" +
                "</br>"+
                "<p>"+d.track_count+" tracks</p>";
      });

        //x for x-position
        //r for radius; value will be proportional to area  
    //________________//
        
    //Set up SVG and axis//   
    var svg = d3.select("svg");
    var digits = /(\d*)/;
    var margin = 50; //space in pixels from edges of SVG
    var padding = 4; //space in pixels between circles
    var maxRadius = 35;
    var biggestFirst = true; //should largest circles be added first?

    var width = window.getComputedStyle(svg[0][0])["width"];
        width = digits.exec(width)[0];
    var height = window.getComputedStyle(svg[0][0])["height"];
        height = Math.min(digits.exec(height)[0], width);
        
    var baselineHeight = (margin + height)/2;

    var xScale = d3.scale.linear()
            .domain([0,1])
            .range([margin,width-margin]);
    var rScale = d3.scale.sqrt()  
            //make radius proportional to square root of data r
            .domain([0,1])
            .range([1,maxRadius]);
        
    var formatPercent = d3.format(".0%");

    // var xAxis = d3.svg.axis()
    //     .scale(xScale)
    //     .orient("top")
    //     .ticks(5)
    //     .tickFormat(formatPercent);
        
    // svg.append("g")
    //     .attr("class", "x axis")
    //     .attr("transform", "translate(0," + margin + ")")
    //     .call(xAxis);
        
    svg.call(tip);

    var threads = svg.append("g")
        .attr("class", "threads");

        
    var bubbleLine = svg.append("g")
            .attr("class", "bubbles")
            .attr("transform", 
                  "translate(0," + baselineHeight + ")");
        
        bubbleLine.append("line")
            .attr("x1", xScale.range()[0])
            .attr("x2", xScale.range()[1]);
    //________________//
        
    //Create Quadtree to manage data conflicts & define functions//
        
    var quadtree = d3.geom.quadtree()
            .x(function(d) { return xScale(d.x); }) 
            .y(0) //constant, they are all on the same line
            .extent([[xScale(-1),0],[xScale(2),0]]);
        //extent sets the domain for the tree
        //using the format [[minX,minY],[maxX, maxY]]
        //optional if you're adding all the data at once

    var quadroot = quadtree([]);
              //create an empty adjacency tree; 
              //the function returns the root node.
        
    // Find the all nodes in the tree that overlap a given circle.
    // quadroot is the root node of the tree, scaledX and scaledR
    //are the position and dimensions of the circle on screen
    //maxR is the (scaled) maximum radius of dots that have
    //already been positioned.
    //This will be most efficient if you add the circles
    //starting with the smallest.  
    function findNeighbours(root, scaledX, scaledR, maxR) {

        var neighbours = [];
        //console.log("Neighbours of " + scaledX + ", radius " + scaledR);
        
      root.visit(function(node, x1, y1, x2, y2) {
          //console.log("visiting (" + x1 + "," +x2+")");
        var p = node.point; 
        if (p) {  //this node stores a data point value
            var overlap, x2=xScale(p.x), r2=rScale(p.r);        
            if (x2 < scaledX) {
                //the point is to the left of x
                overlap = (x2+r2 + padding >= scaledX-scaledR);
                /*console.log("left:" + x2 + ", radius " + r2 
                            + (overlap?" overlap": " clear"));//*/
            }      
            else {
                //the point is to the right
                overlap = (scaledX + scaledR + padding >= x2-r2);
                /*console.log("right:" + x2 + ", radius " + r2 
                            + (overlap?" overlap": " clear"));//*/
            }
            if (overlap) neighbours.push(p);
        }
       
        return (x1-maxR > scaledX + scaledR + padding) 
                && (x2+maxR < scaledX - scaledR - padding) ;
          //Returns true if none of the points in this 
          //section of the tree can overlap the point being
          //compared; a true return value tells the `visit()` method
          //not to bother searching the child sections of this tree
      });
        
        return neighbours;
    }

    function calculateOffset(maxR){
        return function(d) {
            neighbours = findNeighbours(quadroot, 
                                       xScale(d.x),
                                       rScale(d.r),
                                       maxR);
            var n=neighbours.length;
            //console.log(j + " neighbours");
            var upperEnd = 0, lowerEnd = 0;      
            
            if (n){
                //for every circle in the neighbour array
                // calculate how much farther above
                //or below this one has to be to not overlap;
                //keep track of the max values
                var j=n, occupied=new Array(n);
                while (j--) { 
                    var p = neighbours[j];
                    var hypoteneuse = rScale(d.r)+rScale(p.r)+padding; 
                    //length of line between center points, if only 
                    // "padding" space in between circles
                    
                    var base = xScale(d.x) - xScale(p.x); 
                    // horizontal offset between centres
                    
                    var vertical = Math.sqrt(Math.pow(hypoteneuse,2) -
                        Math.pow(base, 2));
                    //Pythagorean theorem
                    
                    occupied[j]=[p.offset+vertical, 
                                 p.offset-vertical];
                    //max and min of the zone occupied
                    //by this circle at x=xScale(d.x)
                }
                occupied = occupied.sort(
                    function(a,b){
                        return a[0] - b[0];
                    });
                //sort by the max value of the occupied block
                //console.log(occupied);
                lowerEnd = upperEnd = 1/0;//infinity
                    
                j=n;
                while (j--){
                    //working from the end of the "occupied" array,
                    //i.e. the circle with highest positive blocking
                    //value:
                    
                    if (lowerEnd > occupied[j][0]) {  
                        //then there is space beyond this neighbour  
                        //inside of all previous compared neighbours
                        upperEnd = Math.min(lowerEnd,
                                            occupied[j][0]);
                        lowerEnd = occupied[j][1];
                    }
                    else {
                        lowerEnd = Math.min(lowerEnd,
                                            occupied[j][1]);
                    }
                //console.log("at " + formatPercent(d.x) + ": "
                  //          + upperEnd + "," + lowerEnd);
                }
            }
                
                //assign this circle the offset that is smaller
                //in magnitude:
            return d.offset = 
                    (Math.abs(upperEnd)<Math.abs(lowerEnd))?
                            upperEnd : lowerEnd;
        };
    }
        
        //Create circles!//
    var maxR = 0;
    bubbleLine.selectAll("circle")
        .data(data.sort(
            biggestFirst?
                function(a,b){return b.r - a.r;} :
                function(a,b){return a.r - b.r;}
            ))          
        .enter()
            .append("circle")
            .attr("r", function(d){
                var r=rScale(d.r);
                maxR = Math.max(r,maxR);
                return r;})
            .each(function(d, i) {
                //for each circle, calculate it's position
                //then add it to the quadtree
                //so the following circles will avoid it.
                
                //console.log("Bubble " + i);
                var scaledX = xScale(d.x);            
                d3.select(this) 
                    .attr("cx", scaledX)
                    .attr("cy", -baselineHeight + margin)
                    // .transition().delay(300*i).duration(250)
                    // .attr('fill', function (d) {
                    //   $.get('http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&mbid='+d.mbid+'&api_key=57b53c3da9ce44e9f95eddc2c449b816&format=json', function (data) {
                    //     console.log(data.artist.image[2]['#text']);
                    //     return data.artist.image[2]['#text'];
                    //   })
                    // })
                    .attr("cy", calculateOffset(maxR))
                    .attr('fill', 'transparent')
                quadroot.add(d);
                
                // bubbleLine.append("text")
                //     .attr("x", scaledX)
                //     .attr("y", d.offset)
                //     .text(d.name + ' ' + d.raw_num_words + ' mx('+d.all_max+')');
                
                //add a drop line from the centre of this
                //circle to the axis
                // threads.append("line").datum(d)
                //     .attr({x1:scaledX, x2:scaledX, y2:margin})
                //     .attr("y1", margin)
                //     .transition().delay(300*i).duration(250)
                //     .attr("y1", (baselineHeight+d.offset));
            })
            .on('mouseover', tip.show)
            .on('mouseout', tip.hide);
        
        
    })();
  </script>
</body>
</html>